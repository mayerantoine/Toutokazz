@model  PagedList.IPagedList<Toutokaz.Domain.Models.tb_ads>
@using Toutokaz.WebUI.Helpers  
@using MvcSiteMapProvider.Web.Html
@using PagedList.Mvc

    <ul data-role="listview" data-filter="true" id="content_result" data-filter-placeholder="Recherche">
        @foreach (var item in Model)
        {
            <li>
                <a href="@Url.Action("details","Annonces", new { id= item.id_ad, ad_title=item.ad_title.ToSeoUrl()},null)">
                    <img  alt="@Url.Content(string.IsNullOrEmpty(item.tb_ad_image.FirstOrDefault().image_filename)? "default-img.jpg" : item.tb_ad_image.FirstOrDefault().image_filename)" src="@Url.Content(WebConfigurationManager.AppSettings["PhotosDir"]+ (string.IsNullOrEmpty(item.tb_ad_image.FirstOrDefault().image_filename)? "default-img.jpg" : item.tb_ad_image.FirstOrDefault().image_filename)+"?width=180&height=140" )" />
                    <span id="ad_title">@Html.DisplayFor(model => item.ad_title)</span>
                    <p>
                        @if (item.id_section != 9 && item.id_section != 12)
                        {
                            <span id="price">@Html.Raw(HttpUtility.HtmlDecode(item.tb_devise.symbole))@Html.DisplayFor(x => item.ad_price)</span>
                        }| @Html.DisplayFor(x => item.tb_category.category_title) | <span class="glyphicon glyphicon-map-marker"></span> @Html.DisplayFor(x => item.tb_commune.commune) 

                    </p>


                </a>
            </li>
        }
    </ul>
<div style="margin-top:10px;">

    @Html.PagedListPager(Model, pageNumber => @Url.Action("allannonce", "Annonces", new { pageNumber, typeannonce = ViewBag.currentType, keywords = ViewBag.currentKeyword, id_category = ViewBag.currentCategory, ad_city = ViewBag.currentAdCity, id_account_type = ViewBag.currentAccountType }),
    new PagedListRenderOptions
    {
        LinkToPreviousPageFormat = "<< Précédente",
        LinkToNextPageFormat = "Suivante >>",
        DisplayLinkToFirstPage = PagedListDisplayMode.Never,
        DisplayLinkToLastPage = PagedListDisplayMode.Never,
        DisplayLinkToIndividualPages = false,
        DisplayLinkToNextPage = PagedListDisplayMode.IfNeeded,
        DisplayLinkToPreviousPage = PagedListDisplayMode.IfNeeded,
        Display = PagedListDisplayMode.IfNeeded,
    })
</div>

<div id="menu_botom" style="margin-top:25px;">
<ul data-role="listview" data-inset="true">
    <li> <a href="@Url.Action("Index","Home")">Accueil</a></li>
    <li><a href="@Url.Action("create","account")">Créer Compte</a></li>
    <li><a href="@Url.Action("SearchKeywords", "annonces")">Recherche</a></li>
</ul>

</div>
