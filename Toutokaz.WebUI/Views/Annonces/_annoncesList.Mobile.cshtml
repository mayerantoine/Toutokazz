@model  PagedList.IPagedList<Toutokaz.Domain.Models.tb_ads>
@using Toutokaz.WebUI.Helpers  
@using MvcSiteMapProvider.Web.Html
@using PagedList.Mvc

<ul data-role="listview" data-filter="true" id="content_result" data-filter-placeholder="Recherche">
        @foreach (var item in Model)
        {
            <li>
                <a href="@Url.Action("details","Annonces", new { id= item.id_ad, ad_title=item.ad_title.ToSeoUrl()},null)">
                    <img class="image-border" alt="@Url.Content(string.IsNullOrEmpty(item.tb_ad_image.FirstOrDefault().image_filename)? "default-img.jpg" : item.tb_ad_image.FirstOrDefault().image_filename)" src="@Url.Content(WebConfigurationManager.AppSettings["PhotosDir"]+ (string.IsNullOrEmpty(item.tb_ad_image.FirstOrDefault().image_filename)? "default-img.jpg" : item.tb_ad_image.FirstOrDefault().image_filename)+"?width=180&height=140" )" />
                    <span class="photo-count"><i class="fa fa-camera"></i>  @Html.Encode(item.tb_ad_image.Count()) </span> <br />
                    <span id="ad_title">@Html.DisplayFor(model => item.ad_title)</span><br />
                    <span class="info-row"> <span class="category">@Html.DisplayFor(x => item.tb_category.category_title) </span>- <span class="item-location"><i class="fa fa-map-marker"></i> @Html.DisplayFor(x => item.tb_commune.commune) </span> </span><br />
                    <span class="date"><i class=" icon-clock"> </i> @Html.Encode(item.ad_date_created.Value.ToString("dd. MM. yyyy"))</span><br />
                    <div style="margin-top:15px;">
                        @if (item.id_section != 9 && item.id_section != 12)
                        {
                            <span id="price">@Html.Raw(HttpUtility.HtmlDecode(item.tb_devise.symbole))@Html.DisplayFor(x => item.ad_price)</span>

                        }
                    </div>


                </a>
            </li>
        }
    </ul>
<div style="margin-top:10px;">

    @Html.PagedListPager(Model, pageNumber => @Url.Action("allannonce", "Annonces", new { pageNumber, typeannonce = ViewBag.currentType, keywords = ViewBag.currentKeyword, id_category = ViewBag.currentCategory, ad_city = ViewBag.currentAdCity, id_account_type = ViewBag.currentAccountType }),
    new PagedListRenderOptions
    {
        LinkToPreviousPageFormat = "<< Précédente",
        LinkToNextPageFormat = "Suivante >>",
        DisplayLinkToFirstPage = PagedListDisplayMode.Never,
        DisplayLinkToLastPage = PagedListDisplayMode.Never,
        DisplayLinkToIndividualPages = false,
        DisplayLinkToNextPage = PagedListDisplayMode.IfNeeded,
        DisplayLinkToPreviousPage = PagedListDisplayMode.IfNeeded,
        Display = PagedListDisplayMode.IfNeeded,
    })
</div>


