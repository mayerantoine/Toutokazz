@model  PagedList.IPagedList<Toutokaz.Domain.Models.tb_ads>
@using Toutokaz.WebUI.Helpers
@using MvcSiteMapProvider.Web.Html
@using PagedList.Mvc      

<div id="annoncesList">
     <table class="table table-hover">
                    <thead>
                      <tr>
                        <th></th>      
                        <th class="text-center"></th>
                      </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {               
                           <tr>
                        <td class="col-sm-8 col-md-6">
    <div class="media">
        <a class="thumbnail pull-left" href="@Url.Action("details","Annonces", new { id= item.id_ad, ad_title=item.ad_title.ToSeoUrl()},null)">
            <img class="media-object" alt="@Url.Content(string.IsNullOrEmpty(item.tb_ad_image.FirstOrDefault().image_filename)? "default-img.jpg" : item.tb_ad_image.FirstOrDefault().image_filename)" src="@Url.Content(WebConfigurationManager.AppSettings["PhotosDir"]+ (string.IsNullOrEmpty(item.tb_ad_image.FirstOrDefault().image_filename)? "default-img.jpg" : item.tb_ad_image.FirstOrDefault().image_filename) + "?width=100&height=100")" class="img-responsive" />
        </a>
        <div class="media-body">
            <h4 class="media-heading">
                @Html.ActionLink(item.ad_title, "details", "Annonces", new { id = item.id_ad, ad_title = item.ad_title.ToSeoUrl() }, null)
                @if (item.ad_status == 4)
                                    {
                    <label class="label label-danger vendu">vendu</label>
                                    }
            </h4>
            <p>@Html.TruncateDescription(item.ad_description,120)</p>
            <p>Publiée dans : @Html.DisplayFor(x => item.tb_category.category_title) | <span class="glyphicon glyphicon-map-marker"></span> @Html.DisplayFor(x => item.tb_commune.commune) | <span class="glyphicon glyphicon-calendar"></span>  <span style="vertical-align:bottom;font-weight:bold"> @Html.Encode(item.ad_date_created.Value.ToString("dd. MM. yyyy"))</span></p>
        </div>

               </div>
           </td>
                               <td class="col-sm-1 col-md-1 text-center" style="vertical-align: middle;font-weight:bold">
                                   @if (item.id_section != 9 && item.id_section != 8)
                                   {
                                       <span class="label label-warning" style="font-size:14px; vertical-align:middle">@Html.Raw(HttpUtility.HtmlDecode(item.tb_devise.symbole)) @Html.DisplayFor(x => item.ad_price)</span>
                                   }
    
                               </td>
                      </tr>
                        }
                        </tbody>
                 </table>
        <div>
            
           @Html.PagedListPager(Model, pageNumber => @Url.Action("annonceur","Annonces", new { pageNumber}))
        </div>

</div>